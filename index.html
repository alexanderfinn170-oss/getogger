<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Scratch & Win</title>

<style>
body{
    margin:0;
    font-family:Arial, sans-serif;
    background:#6a0dad;
    text-align:center;
    color:white;
}

.container{
    max-width:400px;
    margin:auto;
    padding:20px;
}

.box{
    border:2px solid yellow;
    padding:10px;
    margin:15px 0;
    border-radius:8px;
    background:#6a0dad;
}

.box h2{
    margin:0;
    color:white;
}

.warning{
    font-size:12px;
    margin-top:5px;
}

img{
    width:100%;
    border:2px solid yellow;
    border-radius:8px;
    margin:15px 0;
}

canvas{
    border-radius:10px;
    margin-top:10px;
}

.price{
    font-size:20px;
    margin:10px 0;
}

.qty-control{
    display:flex;
    justify-content:center;
    align-items:center;
    gap:8px;
    margin-top:10px;
}

.qty-btn{
    width:30px;
    height:30px;
    background:yellow;
    border:none;
    font-weight:bold;
    cursor:pointer;
}

.qty-box{
    width:50px;
    height:30px;
    text-align:center;
    border:2px solid yellow;
    background:yellow;
}
</style>
</head>
<body>

<div class="container">

<div class="box">
<h2>Scratch and Win Discount</h2>
<div class="warning">
üö´Importantüö´ ‡¶è‡¶ü‡¶ø ‡¶è‡¶ï‡¶ü‡¶ø ‡¶∞‡¶ø‡¶Ø‡¶º‡ßá‡¶≤ ‡¶∏‡ßç‡¶ü‡¶ø‡¶ï ‡¶≠‡¶æ‡¶∞‡ßç‡¶ö‡ßÅ‡¶Ø‡¶º‡¶æ‡¶≤ ‡¶°‡¶ø‡¶∏‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ö ‡¶ï‡¶æ‡¶∞‡ßç‡¶° | 
‡¶¶‡ßç‡¶¨‡¶ø‡¶§‡ßÄ‡¶Ø‡¶º‡¶¨‡¶æ‡¶∞ ‡¶ü‡ßç‡¶∞‡¶æ‡¶á ‡¶ï‡¶∞‡ßá ‡¶¨‡¶æ VPN ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßá ‡¶°‡¶ø‡¶∏‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶™‡ßç‡¶∞‡¶≠‡¶æ‡¶¨‡¶ø‡¶§ ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶® ‡¶®‡¶æ üö´
</div>
</div>

<img src="https://via.placeholder.com/400x250.png?text=Product+Image">

<canvas id="scratchCard" width="350" height="150"></canvas>

<div class="price">
Original Price: 999‡ß≥
</div>

<div class="price" id="discountPrice">
Discounted Price: --
</div>

<div class="qty-control">
<button class="qty-btn" onclick="changeQty(-1)">-</button>
<input type="text" id="qty" class="qty-box" value="1" readonly>
<button class="qty-btn" onclick="changeQty(1)">+</button>
</div>

</div>

<script>
let canvas = document.getElementById("scratchCard");
let ctx = canvas.getContext("2d");
let isDrawing = false;
let revealed = false;

let originalPrice = 999;
let discountPercent = 0;
let qty = 1;

function createRainbow(){
    let gradient = ctx.createLinearGradient(0,0,canvas.width,0);
    gradient.addColorStop(0,"red");
    gradient.addColorStop(0.17,"orange");
    gradient.addColorStop(0.34,"yellow");
    gradient.addColorStop(0.51,"green");
    gradient.addColorStop(0.68,"blue");
    gradient.addColorStop(0.85,"indigo");
    gradient.addColorStop(1,"violet");
    ctx.fillStyle = gradient;
    ctx.fillRect(0,0,canvas.width,canvas.height);
}

function loadSavedState(){
    let savedImage = localStorage.getItem("scratchImage");
    let savedDiscount = localStorage.getItem("discountPercent");
    if(savedImage){
        let img = new Image();
        img.src = savedImage;
        img.onload = function(){
            ctx.drawImage(img,0,0);
        }
        revealed = true;
        discountPercent = savedDiscount;
        updatePrice();
    }else{
        createRainbow();
    }
}

canvas.addEventListener("mousedown",start);
canvas.addEventListener("touchstart",start);

canvas.addEventListener("mousemove",draw);
canvas.addEventListener("touchmove",draw);

canvas.addEventListener("mouseup",stop);
canvas.addEventListener("touchend",stop);

function start(e){
    if(revealed) return;
    isDrawing = true;
}

function draw(e){
    if(!isDrawing) return;
    e.preventDefault();
    let rect = canvas.getBoundingClientRect();
    let x = (e.touches ? e.touches[0].clientX : e.clientX) - rect.left;
    let y = (e.touches ? e.touches[0].clientY : e.clientY) - rect.top;
    ctx.globalCompositeOperation = "destination-out";
    ctx.beginPath();
    ctx.arc(x,y,20,0,Math.PI*2);
    ctx.fill();
}

function stop(){
    if(!isDrawing) return;
    isDrawing = false;

    if(!revealed){
        discountPercent = Math.floor(Math.random()*30)+10; 
        revealed = true;
        localStorage.setItem("discountPercent",discountPercent);
    }

    localStorage.setItem("scratchImage",canvas.toDataURL());
    updatePrice();
}

function updatePrice(){
    let discounted = originalPrice - (originalPrice*discountPercent/100);
    let finalPrice = discounted * qty;
    document.getElementById("discountPrice").innerText =
    "Discounted Price: " + finalPrice.toFixed(0) + "‡ß≥ ("+discountPercent+"% OFF)";
}

function changeQty(change){
    qty += change;
    if(qty < 1) qty = 1;
    document.getElementById("qty").value = qty;
    if(revealed){
        updatePrice();
    }
}

loadSavedState();
</script>

</body>
</html>
