<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Live Dating Room</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:Arial;
  background:#0b141a;
  color:white;
  height:100vh;
  display:flex;
  flex-direction:column;
}
.header{
  height:60px;
  background:#202c33;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:bold;
  position:fixed;
  top:0;
  width:100%;
  z-index:100;
}
.messages{
  flex:1;
  overflow-y:auto;
  padding:70px 10px 80px 10px;
}
.inputBox{
  height:60px;
  background:#202c33;
  display:flex;
  align-items:center;
  padding:0 10px;
  position:fixed;
  bottom:0;
  width:100%;
}
.inputBox input{
  flex:1;
  padding:10px;
  border-radius:20px;
  border:none;
}
.inputBox button{
  margin-left:5px;
  padding:10px 15px;
  border:none;
  border-radius:20px;
  background:#25d366;
  color:white;
  cursor:pointer;
}
.msg{
  display:flex;
  margin-bottom:12px;
  cursor:pointer;
}
.msg img{
  width:34px;
  height:34px;
  border-radius:50%;
  margin-right:8px;
}
.bubble{
  background:#202c33;
  padding:8px 12px;
  border-radius:12px;
  max-width:75%;
}
.me{justify-content:flex-end;}
.me .bubble{background:#005c4b;}
.name{font-size:12px;color:#53bdeb;}
.online{font-size:10px;color:#25d366;}
.time{font-size:10px;opacity:.6;margin-top:4px;}
.typing{
  font-size:12px;
  opacity:.6;
  margin:5px 0;
}
.privateBox{
  position:fixed;top:0;left:0;width:100%;height:100%;
  background:#111b21;display:none;flex-direction:column;z-index:999;
}
.privateHeader{
  height:60px;background:#202c33;display:flex;
  align-items:center;padding:0 10px;
}
.privateHeader img{
  width:40px;height:40px;border-radius:50%;margin-right:10px;
}
.closeBtn{margin-left:auto;font-size:22px;cursor:pointer;}
.privateMessages{
  flex:1;
  overflow-y:auto;
  padding:10px;
  padding-bottom:80px;
}
</style>
</head>

<body>

<div class="header">üî• My Live Dating Room</div>
<div class="messages" id="groupMessages"></div>

<div class="inputBox">
<input id="groupInput" placeholder="Type message...">
<button onclick="sendGroup()">Send</button>
</div>

<div class="privateBox" id="privateBox">
<div class="privateHeader">
<img id="privateImg">
<div>
<div id="privateName"></div>
<div class="online">‚óè Online</div>
</div>
<div class="closeBtn" onclick="closePrivate()">√ó</div>
</div>
<div class="privateMessages" id="privateMessages"></div>
<div class="inputBox">
<input id="privateInput" placeholder="Type message...">
<button onclick="sendPrivate()">Send</button>
</div>
</div>

<script>

/* ===== EXISTING GROUP SYSTEM UNCHANGED ===== */

const TOTAL_PROFILES=200;
let names=[],profiles={};

for(let i=1;i<=TOTAL_PROFILES;i++){
  let randomNumber=Math.floor(1000+Math.random()*9000);
  let name="RandomUser"+randomNumber;
  names.push(name);
  profiles[name]={
    img:`https://randomuser.me/api/portraits/women/${i%90}.jpg`
  };
}

/* ===== PRIVATE SYSTEM UPDATED ONLY ===== */

let activeProfile=null;
let visitorName="Visitor"+Math.floor(Math.random()*9999);
let privateStep=0;

const firstReplies=["Hello","Hi"];

let secondPool=[
"How are you? Are you happy in your life? Would you like to meet me for adult dating?",
"Tell me how your day was, are you feeling lonely? Would you meet me privately?",
"Are you single and happy? Do you want to see me in real life for adult dating?",
"What makes you happy? Would you meet me soon for something serious?",
"Are you enjoying your life? Do you like spicy food? Want to meet me?",
"What do you usually eat? Are you satisfied in life? Meet me for adult dating?",
"Did you work today? Are you emotionally happy? Would you see me?",
"What kind of food do you love? Are you looking for adult connection?",
"Are you serious about dating? Would you like to meet tonight?",
"Do you feel alone sometimes? Want to spend time with me?",
"Are you confident and mature? Meet me privately?",
"Are you living happily? Would you go on a private date?",
"What makes you smile? Want to meet me in person?",
"Do you like romantic dinners? Would you like adult dating with me?",
"Are you emotionally strong? Meet me soon?",
"Do you enjoy deep connection? Would you meet face to face?",
"What do you love to eat? Are you single and ready?",
"Are you satisfied in your life? Want something real?",
"Are you searching for serious adult dating?",
"Would you like to meet me personally for adult fun?"
];

let usedIndexes=[];

function openPrivate(name){
  activeProfile=name;
  privateStep=0;
  document.getElementById("privateBox").style.display="flex";
  document.getElementById("privateName").innerText=name;
  document.getElementById("privateImg").src=profiles[name].img;
  document.getElementById("privateMessages").innerHTML="";
}

function closePrivate(){
  document.getElementById("privateBox").style.display="none";
}

function getUniqueSecondMessage(){
  if(usedIndexes.length===secondPool.length){
    usedIndexes=[];
  }
  let index;
  do{
    index=Math.floor(Math.random()*secondPool.length);
  }while(usedIndexes.includes(index));
  usedIndexes.push(index);
  return secondPool[index];
}

function sendPrivate(){
  let input=document.getElementById("privateInput");
  if(!input.value.trim()) return;

  let box=document.getElementById("privateMessages");

  box.insertAdjacentHTML("beforeend",`
    <div class="msg me">
      <div class="bubble">
        <div class="name">${visitorName}</div>
        ${input.value}
      </div>
    </div>
  `);

  input.value="";
  box.scrollTop=box.scrollHeight;

  if(privateStep>=2) return;

  setTimeout(()=>{

    let typingDiv=document.createElement("div");
    typingDiv.className="typing";
    typingDiv.innerText=activeProfile+" is typing...";
    box.appendChild(typingDiv);
    box.scrollTop=box.scrollHeight;

    setTimeout(()=>{

      typingDiv.remove();

      let reply;
      if(privateStep===0){
        reply=firstReplies[Math.floor(Math.random()*2)];
      }else{
        reply=getUniqueSecondMessage();
      }

      box.insertAdjacentHTML("beforeend",`
        <div class="msg">
          <img src="${profiles[activeProfile].img}">
          <div class="bubble">
            <div class="name">${activeProfile}</div>
            ${reply}
          </div>
        </div>
      `);

      box.scrollTop=box.scrollHeight;
      privateStep++;

    },3000);

  },2000);
}

</script>

</body>
</html>
